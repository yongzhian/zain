<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.flwrobot.dao.CommunityNotificationDao">

	<resultMap type="com.flwrobot.entity.CommunityNotification" id="communityNotification">
		<id column="id" property="id"/>
		<id column="community_management_id" property="communityManagementId"/>
		<id column="title" property="title"/> 
		<id column="content" property="content"/>
		<id column="create_time" property="createTime"/>
		<id column="adder" property="adder"/>
		
		<id column="last_modifier" property="lastModifier"/>
		<id column="is_valid" property="isValid"/>
	</resultMap>
	
	<insert id="insert" parameterType="com.flwrobot.entity.CommunityNotification" useGeneratedKeys="true" keyProperty="id">
		insert into
		community_notification(community_management_id, title, content, create_time,adder)
		values(#{communityManagementId}, #{title}, #{content}, now(),#{adder})
	</insert>
	
	<select id="getCommunityNotificationListCountByCondition" parameterType="Map" resultType="long">
        SELECT COUNT(1) FROM community_notification s  
        <trim prefix="WHERE" prefixOverrides="AND">
                <if test="conditionMap.containsKey('id')">
                    AND s.id = #{conditionMap.id}
                </if>
                <if test="conditionMap.containsKey('communityManagementId')">
                    AND s.community_management_id = #{conditionMap.communityManagementId}
                </if>
                <if test="conditionMap.containsKey('isValid')">
                    AND s.is_valid = #{conditionMap.isValid}
                </if>
                <if test="conditionMap.containsKey('createTimeFrom')">
                    AND s.create_time >= #{conditionMap.createTimeFrom}
                </if>
       </trim>
    </select> 
    
	<select id="getCommunityNotificationListByCondition" parameterType="Map" resultMap="communityNotification">
        SELECT * FROM community_notification s    
        <trim prefix="WHERE" prefixOverrides="AND">
                <if test="conditionMap.containsKey('id')">
                    AND s.id = #{conditionMap.id}
                </if>
                <if test="conditionMap.containsKey('communityManagementId')">
                    AND s.community_management_id = #{conditionMap.communityManagementId}
                </if>
                <if test="conditionMap.containsKey('isValid')">
                    AND s.is_valid = #{conditionMap.isValid}
                </if>
                <if test="conditionMap.containsKey('createTimeFrom')">
                    AND s.create_time >= #{conditionMap.createTimeFrom}
                </if>
       </trim>
       <if test="conditionMap.containsKey('orderBy')">
            ORDER BY create_time ${conditionMap.orderBy},id ${conditionMap.orderBy}
       </if>
       <if  test="conditionMap.containsKey('beginItem') and conditionMap.containsKey('endItem') ">
            LIMIT ${conditionMap.beginItem},${conditionMap.endItem}
       </if>
    </select>
</mapper>